#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Executando verificaÃ§Ãµes prÃ©-push..."

# Type check
echo "ğŸ“ Verificando tipos TypeScript..."
yarn type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type check falhou. Corrija os erros antes de fazer push."
  exit 1
fi

# Linter
echo "ğŸ” Executando linter..."
yarn lint
if [ $? -ne 0 ]; then
  echo "âš ï¸  Linter encontrou problemas. Continue mesmo assim? (y/n)"
  read -r response
  if [ "$response" != "y" ]; then
    exit 1
  fi
fi

# Testes bÃ¡sicos (rÃ¡pidos) - nÃ£o bloqueia, apenas avisa
echo "ğŸ§ª Executando testes bÃ¡sicos..."
yarn test:basic || echo "âš ï¸  Alguns testes bÃ¡sicos falharam (nÃ£o bloqueando push)"

echo "âœ… VerificaÃ§Ãµes concluÃ­das!"
